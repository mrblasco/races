
The model
=========

In this section, we generalize the _contest game_ introduced by @moldovanu2001optimal to a situation where players allocate their effort along two dimensions: quality and time to complete a given job. Then we explore the problem of maximization faced by a contest designer with preferences for both quality and time.

Basic setup
------------

A (generalized) contest game is an $n$ player game with asymmetric information. Players compete for $k$ prizes by choosing a performance variable $y$ and a timing $t$ both nonnegative numbers. Each player holds a valuation $v_k$ that assignes a nonnegative value to each prize $k$ with $v_1\geq v_2 \geq ...\geq v_q$. Players move simultaneously to maximize the probability of winning a prize while minimizing the cost of effort. Costs are known up to an ability parameter that is private information of each player.

Let $a_1, ..., a_n$ denote the privately observed individual ability of each player. Abilities are independently drawn at random from a common distribution $F_{\mathcal{A}}$ on an interval on the positive real line $\mathcal{A}$. Let $C(a_i, y_i, t_i)$ denote player $i$'s cost function that is multiplicative 
\begin{equation}
  C(a_i, y_i, t_i) = c_a(a_i) c_y(y_i) c_t(t_i)
\end{equation}
with $c_a(\cdot)$ and $c_t(\cdot)$ being monotonic decreasing functions (the higher the ability or the time to complete, the lower the cost) and $c_{y}(\cdot)$ being a monotonic increasing function (the higher the quality, the higher the cost). We further impose conditions to ensure nonnegative costs: $\lim_{a\rightarrow \infty}c_{a}(a)>0$, $\lim_{t\rightarrow \infty}c_{t}(t)>0$, and $c_{y}(0)\geq 0$.

Let $p_{i, k}(y_1,..., y_N, t_1, ..., t_N)$ be player $i$'s probability of winning the $k^{th}$ prize. Player $i$'s expected payoff is

\begin{equation}
  \label{expected payoff}
  \pi_i = \sum_{k=1}^{q} p_{i, k}(y_1,..., y_N, t_1, ..., t_N) v_k - C(a_i, y_i, t_i). 
\end{equation}

A generalized contest game $G$ can be then denoted by 
\begin{equation}
G \equiv \left\{
    n, q, \{v_k\}_{k=1}^{q},  F_\mathcal{A}, C, \{p_{i,k}\}_{i,k=1}^{q,n} 
  \right\}.
\end{equation}

The game $G$ is said to have minimum-entry requirements when it is not sufficient to beat the other competitors to win a prize but players have also to successfully meet a given deadline and/or satisfy a minimum quality requirement. Let $\deadline>0$ denote the deadline and $\target\geq 0$ the required minimum performance. A game $G$ has minimum-entry requirements when, for every prize $k$ and player $i$, the probability $p_{i, k}(\cdot, \cdot)=0$ when player $i$'s quality is below a target level $q_i < \target$ or the timing to completion is above a given deadline $t_i>\deadline$.


Races and tournaments
----------------------

The tournament corresponds to a special case of a game with minimum-entry requirements where the player having achieved the highest output quality within the deadline gets the first prize, the player having achieved the second highest output quality gets the second prize, and so on. Let $y_{(1:n)}, ..., y_{(n:n)}$ denote the order statistics of the $y$'s for $n$ players. Formally, we have the following definition.

\begin{definition}
A tournament is a contest game $G$ with minimum-entry requirements $\deadline$ where player $i$'s probability of winning a prize is
\begin{equation}
  p_{i, k}^\tournament =
  \begin{cases}
    \Pr(y_i > y_{n-1:n-1}) & \text{if }k=1\\
    \Pr(y_{n-k+1:n-1} > y_i > y_{n-k:n-1}) & \text{if }k>1.
  \end{cases}
\end{equation}
\end{definition}

The race corresponds, on the other hand, to a special case of a game with minimum-entry requirements where the player being the first to complete a job with a minimum quality gets the first prize, the player being the second to complete a job with a minimum quality gets the second prize, and so on. Let $t_{(1:n)}, ..., t_{(n:n)}$ denote the order statistics of the $t$'s. Formally, we have the following definition.

\begin{definition}
A race is a contest game $G$ with minimum-entry requirements $\target$ where player $i$'s probability of winning a prize is
\begin{equation}
  p_{i, k}^\race =
  \begin{cases}
    \Pr(t_i < t_{1:n-1}) & \text{if }k=1\\
    \Pr(t_{1-k:n-1} > t_i > t_{k:n-1}) & \text{if }k>1.
  \end{cases}
\end{equation}
\end{definition}


Equilibrium
-------------

To simplify the analysis, we suppose there are only two prizes of total value normalized to one. We let $\alpha$ denote the fraction going to the first place which is larger than the fraction going to the second place ($\alpha\geq1/2$).

Following @moldovanu2001optimal, we characterize the unique symmetric equilibrium in a race competition. 

\begin{proposition}
In a race, player $i$'s optimal quality $y^*(a_i)$ is equal to the minimum-entry requirement $\target$ and the optimal timing $t^*(a_i)$ is given by
\begin{equation} 
  \label{eq: optimal time race}
  \ctime^{-1}
  \left[
    \ctime(\deadline) 
    + \frac{1}{\cscore(\target)}\left(
      \alpha \int_{a_i}^{\infty} ... dz
      + (1-\alpha) \int_{a_i}^{\infty} ...  dz
    \right)
  \right]
  \quad \text{if }a_i \geq \mtype.
\end{equation}
Otherwise, if $a_i < \mtype$, the optimal choice is $y^*=0$ and $t^*=\infty$.
\end{proposition}

\begin{shaded}
\begin{proof}
Consider player $i$'s choice and suppose that the other $N-1$ players use the equilibrium strategy stated in the proposition. Let $\phi=t^{-1}$ denote the inverse of the optimal bidding function. Player $i$'s best response is a timing $t_i$ and performance $y_i$ that maximize the expected payoffs \eqref{expected payoff} given the other players' equilibrium. 

Any $y_i > \target$ or $0<y_i<\target$ will raise costs while leaving unchanged the probability of winning. Thus, the choice of $y_i$ is binary. Either $y_i=0$ (with $t_i=\deadline$ by convention) or $y_i= \target$.

Suppose $y_i=\target$. The optimal $t_i$ maximizes the expected payoffs. To compute the expected payoff we use the following notation. For any sequence of variables $x_1, ..., x_{N-1}$,  let $x_{(1:N-1)}, ..., x_{(N-1:N-1)}$ denote the $N-1$ order statistics of the $x$'s, and let $F^x_{(1:N-1)}, ..., F^x_{(N-1:N-1)}$ be the corresponding distribution function. Then the probability of winning a prize \eqref{probability in a race} becomes:
\begin{align} \label{prob 1}
  p_{i, 1}(y_1,..., y_N; t_1,..., t_N)
    & = \Pr(t_i \leq t_{(1:N-1)}) \nonumber\\
    & = \Pr(t_i \leq t^*(a_{(1:N-1)})) \nonumber\\
    & = \Pr(\phi(t_i) \geq a_{(1:N-1)}) \nonumber\\
    & = F^a_{(1:N-1)}(\phi(t_i)).
\end{align}
\begin{align} \label{prob 2}
  p_{i, 2}(y_1,..., y_N; t_1,..., t_N) 
    & = \Pr(t_{(1:N-1)} < t_i \leq t_{(2:N-1)})  \nonumber\\
    & = \Pr(t_i\leq t_{(1:N-1)}\mid t_{(1:N-1)}<t_i) \Pr(t_{(1:N-1)} < t_i) \nonumber\\
    & = \Pr(\phi(t_i)\geq a_{(1:N-1)} \mid a_{(1:N-1)} > \phi(t_i)) \Pr(a_{(1:N-1)} > \phi(t_i)) \nonumber\\
    & \text{(using the independence of individual abilities)}\nonumber\\
    & = F^a_{(1:N-2)}(\phi(t_i))\left[1 - F^a_{(1:N-1)}(\phi(t_i))\right].
\end{align}
Using \eqref{prob 1} and \eqref{prob 2} with \eqref{expected payoff}, player $i$'s expected payoff is (to simplify notation, we drop the index $a$ on the distribution of the order statistics of the individual abilities)
\begin{align}
  \alpha F_{(1:N-1)}(\phi(t_i)) 
  + (1-\alpha) F_{(1:N-2)}(\phi(t_i))\left[1 - F_{(1:N-1)}(\phi(t_i))\right]
  - \costs.
\end{align}
The first order condition for a maximum \citep[see][]{moldovanu2001optimal} is
\begin{align} \label{foc0}
  0 = & \alpha F_{(1:N-1)}^{\prime}(\phi) \phi^{\prime} + \nonumber\\
    & + (1-\alpha)\phi^{\prime}\left\{
        \left[1 - F_{(1:N-1)}(\phi)\right]F_{(1:N-2)}^{\prime}(\phi)
        + F_{(1:N-1)}^{\prime}(\phi) F_{(1:N-2)}(\phi)\right\} + \nonumber\\
    & - c_{a}(a) c_{y}(\target) c_{t}^{\prime}(t_i).
\end{align}
Using $\phi^\prime =  1 / t^{*\prime}(\phi)$ and the equilibrium $\phi(t_i) = \phi(t^*(a_i)) = a_i$, leads to
\begin{align} \label{foc}
  c_{t}^{\prime}(t^{*}(a_i)) t^{*\prime}(a_i) 
      & = \frac{\alpha}{c_{a}(a) c_{y}(\target)} F_{(1:N-1)}^{\prime}(a_i)
        + \frac{(1-\alpha)}{c_{a}(a) c_{y}(\target)}\times \nonumber\\
      & \times\left\{\left[1 - F_{(1:N-1)}(a_i)\right]F_{(1:N-2)}^{\prime}(a_i)
        + F_{(1:N-1)}^{\prime}(a_i) F_{(1:N-2)}(a_i)\right\}.
\end{align}
This gives a differential equation with boundary conditions $t^*(\mtype) = \deadline$. 
Integrating both sides and using the integration rule $\int h(g(x)) g^\prime(x) dx = H(g(x)) + A$ (where $H(\cdot)$ is the antiderivative of $h(\cdot)$ and $A$ is an arbitrary constant) leads to
\begin{align} \label{foc}
  c_{t}(t^{*}(a_i))
      & = A + \frac{\alpha}{c_{y}(\target)} \int A(x) dx
        + \frac{(1-\alpha)}{c_{y}(\target)} \int B(x) dx
\end{align}
where 
\[
  A(x) = \frac{1}{c_{a}(x)} F_{(1:N-1)}^{\prime}(x)
\]
and
\[
  B(x) = \frac{1}{c_{a}(x)} \left\{
      \left[1- F_{(1:N-1)}(x)\right]F_{(1:N-2)}^{\prime}(x)
      + F_{(1:N-1)}^{\prime}(x) F_{(1:N-2)}(x)
    \right\}.
\]
Then we pin down the marginal type $\mtype$ by imposing the zero profit condition
%Now we need to show that this is greater than zero (the payoff obtained by setting $y^*=0$). That is:
\begin{align}
  \pi_i = & \alpha \left[1 - F_{(1:N-1)}(\mtype)\right] 
      + (1-\alpha) \left[1- F_{(1:N-2)}(\mtype)\right]F_{(1:N-1)}(\mtype) + \nonumber\\
    & - c_y(\target) c_a(\mtype) c_{t}(\deadline) = 0.
\end{align}
[Correction: it is not 1:N-1 but N-1:N-1]

Clearly, when $\marginaltype$ goes to infinity (costs go to zero), the probability that the N-1'th order statistics will be higher then xxx becomes zero. Hence, the payoff becomes $\alpha \geq 0$. If instead $\marginaltype$ goes to zero, then payoffs are negative. Hence, there is alpha in the middle... (need to show it is concave). 
\end{proof}
\end{shaded}


An important property of xxx is that $y^*(a_i)$ has its upper bound in xxx and
lower bound in xxxx. Also, equilibrium output quality is monotonic
increasing in the agent’s ability [see @moldovanu2001optimal]. Thus, for
every $i=1, ..., n+1$, the equilibrium expected reward depends only on
the rank of his ability relative to the others. Using ${F_{A_{r:n}}}$ to
denote the distribution of the $r$’th order statistic of abilities gives

\begin{equation} \label{equilibrium payoffs tournament}
  {F_{A_{n:n}}}(a_i) V_1  - C(y_i^*, d, a_i).
\end{equation}

Hence, by setting to zero and solving for the ability, gives the
marginal ability ${\underline a}$ as

\begin{equation}
  {\underline a}= h(n, V, F_A, C, d).
\end{equation}


The equilibrium in a tournament is stated below. 
\begin{proposition}
  In a tournament, xxxx 
\end{proposition}


By comparing xxx and xxx, we find that xxxx. 

\begin{proposition}
Let target xxx be higher in a race than in a tournament.Then, there always exist a non-empty set of abilities $\mathcal A_0 \subset \mathcal A$ where players in the race generate higher performance than in the tournament.  
\end{proposition}

\begin{proof}
Marginal type has utility zero in a race but the same type has a strictly positive utility in the tournament. Since probability of winning is not different in the race or the tournament (the bid is a monotonic transformation of the individual ability or, in other words, rankings are virtually the same), expected payoffs in equilibrium differ only in the cost functions. Hence, to be an equilibrium, the player in the tournament should bid less than the player in the race to earn a strictly positive expected payoff. 
\end{proof}

Let's make an example. Suppose xxxx. 
```
p <- plnorm   # pdf individual abilities 
r <- rlnorm   # Simulate individual abilities
cy <- function(x) x^2 # Cost function performance
ct <- function(x) 2*exp(1-x)  # Cost function timing 
```
FIGURE 1. Equilibrium bids in a race and a tournament. 


Implications. The above proposition applies only if the target is higher in a race than in a tournament. But what if the two competitions had the same target ? In that case, tournaments and races have the same marginal type. Therefore, the performance of players in the tournament with reserve are always non-lower than those in the race. This does not imply that it is optimal to set the target. On the contrary, we will show that it is optimal to set an optimal target in a tournament that is below the optimal target in a race. Next section.  


The contest designer's problem
---------------------------

Let us now focus on the contest designer's problem. Imagine the contest designer can choose the competition format $(c=\race, \tournament)$ to be either the race or the tournament. Let's keep all other aspects of design fixed. The deadline $\deadline_c$ is the same between competition formats $\deadline_c=\deadline$. There is a minimum-entry requirement $\target_c$ that is higher in the race than in the tournament ($\target_\race > \target_\tournament$), where the latter is normalized to zero to ease notation ($\target_\tournament=0$). We will relax this assumption later to consider a more general setting where the level of the minimum-entry requirement is also part of the contest designer's problem.

The contest designer maximizes an objective function that is linearly additive. It consists of the sum of the expected quality achieved by the winners and the corresponding time to completion. 

[Question: do the contest designers care about the second place? Assume they don't.]

In a tournament, the objective function is
\begin{align}
R_\tournament & = \Pr(t_{(1:N)}\leq \deadline) \left\{\int_{a\in\mathcal A} y^*(x \mid t_{(1:N)}\leq \deadline) dF_{N:N}(x) - \tau \deadline - 1 \right\} \nonumber\\
  & = \int y^*(x) dF_{N:N}(x) - \tau \deadline - 1. 
\end{align}
(recall the prize pool is normalized to one). [Implicitly, you're assuming that the prize is always large enough to ensure positive effort.] [Second prize too is stochastic!!!!]

In a race, the objective function is
\begin{align}
R_\race & =  
  \Pr(a_{(N)}\geq \mtype) \left\{\target - \alpha -
  \Pr(a_{(N-1)}\geq \mtype) (1-\alpha) \right\}
  - \tau \int_{\mtype}^{\infty} t^*(x) dF_{N:N}(x) \nonumber\\
  & = [1-F_{N:N}(\mtype)] \left\{\target - \alpha -
  [1-F_{N-1:N}(\mtype)] (1 - \alpha) \right\}
  - \tau \int_{\mtype}^{\infty} t^*(x) dF_{N:N}(x).
\end{align}


Note. $t^*(x) \leq \deadline$ for all $x$'s. Thus, a lower bound for the above objective function can be computed: 
\begin{align}
\underline {R_\race} & = 
  [1-F_{N:N}(\mtype)] \left\{\target - \alpha -
  [1-F_{N-1:N}(\mtype)] (1 - \alpha) - \tau \deadline\right\}
\end{align}
An even simpler lower bound is rewriting the above expression as if $\alpha=1$ (note if the real alpha was set 1 then also mtype would change and therefore setting alpha hits a lower bound only when mtype does xxxx  when alpha is 1). 
 
Note. $y^*(x)$ is lower than $\target$ for all $a < \mtype$. Thus, a lower bound of the tournament's expression is
\begin{align}
\overline {R_\tournament} & = 
  [1-F_{N:N}(\mtype)] \target + \int_{\mtype}^\infty y^*(x) dF_{N:N}(x) 
  - \tau \deadline - 1. 
\end{align}

Proposition.  (a sufficient condition such that) the race "dominates" the tournament is such that $\tau \geq \hat \tau$ and otherwise the tournament.


Proof. Simple algebra.
\begin{align}
  \underline {R_\race} \geq & \overline {R_\tournament} \nonumber\\
  [1-F_{N:N}(\mtype)] (\target - 1 - \tau \deadline) \geq &
  [1-F_{N:N}(\mtype)] \target + \int_{\mtype}^\infty y^*(x) dF_{N:N}(x) 
  - \tau \deadline - 1 \nonumber\\
  - [1-F_{N:N}(\mtype)] (\tau\deadline + 1) \geq &
  \int_{\mtype}^\infty y^*(x) dF_{N:N}(x) 
  - (\tau \deadline + 1) \nonumber\\
  F_{N:N}(\mtype) (\tau \deadline + 1) \geq &
  \int_{\mtype}^\infty y^*(x) dF_{N:N}(x) \nonumber\\
  \tau \geq & 
    \left[
      \frac{\int_{\mtype}^\infty y^*(x) dF_{N:N}(x)}{F_{N:N}(\mtype)} -1 
    \right] \frac{1}{\deadline}
\end{align}

As a result, the intuition was correct. When the preference for time $\tau$ is sufficiently high, the race should be preferred. The threshold is a function of the deadline to complete the job (or time horizon). It also depends on the gains in terms of higher performance for all types above the marginal one. The lower the gains, the lower the threshold. 


Now we turn to discuss the contest designer's choice of an optimal minimum requirement $\target$. So far, we have assumed that $\target_\race>\target_\tournament$. Now, we show that the assumption that xxxx is indeed an optimal choice of the contest designer. This is summarized in the next proposition.

Proposition. Suppose the contest designer can choose the target that max profits in both the race and the tournament. Then, the optimal $\target$ in tournament is generally lower than that in a race.


To prove that it is indeed the case. We proceed in two steps. First, we assume that the contest designer does not care about minimizing the timing of the innovation by imposing $\tau = 0$. For simplicity, assume that $\alpha=1$ (winner-takes-all). In a race, this means that the optimal target will be a value that makes equal the costs in terms of less participation versus the gains in terms of higher values of the winning solutions. Formally, the contest designer's problem in a race is
\begin{align}
  \text{maximize } & R^\race = [1-F_{N:N}(\mtype)] (\target_\race - 1).
\end{align}
Note that $\mtype$ depends on the target. This is clearly concave in $\target_\race$. 
Thus, the first order condition is also sufficient. 
\begin{align}\label{foc race}
  \text{FOC } & \Rightarrow -F^\prime_{N:N}(\mtype) \mtype^\prime (\target_\race - 1) + [1-F_{N:N}(\mtype)] = 0.
\end{align}

In a tournament, ... 
\begin{align}
  \text{maximize } & R^\race = \int_{\mtype}^\infty y^*(x, \target) d F_{N:N}(x) - [1-F_{N:N}(\mtype)]. 
\end{align}
Convexity is not sure. If not, then the optimal target is zero. Which is lower than the optimal target in a race. 

Instead. If the objective function is (strictly) concave then there's an internal solution. 

\begin{align} \label{foc tournament}
  \text{FOC } \Rightarrow & 
    \frac{d\int_{\mtype}^\infty y^*(x, \target) d F_{N:N}(x)) }{d \target}
      + F^\prime_{N:N}(\mtype) \mtype^\prime =0 \nonumber\\ 
    & \text{(by using Leibniz rule)}\nonumber\\
  \Rightarrow & - y^*(\mtype, \target) \mtype^\prime F^\prime_{N:N}(\mtype) 
      + \int_{\mtype}^\infty \dystar - F^\prime_{N:N}(\mtype) \mtype^\prime = 0\nonumber\\
  \Rightarrow & -\target \mtype^\prime F^\prime_{N:N}(\mtype) 
      + \int_{\mtype}^\infty \dystar - F^\prime_{N:N}(\mtype) \mtype^\prime = 0.
\end{align}

Using \eqref{foc race} with \eqref{foc tournament}, the optimal target is the same in the race and the tournament only if
\begin{align} 
  \int_{\mtype}^\infty \dystar = [1- F_{N:N}(\mtype)].
\end{align}

\[
  \frac{\partial y^*(x, \target)}{\partial \target} = 
    \frac{c_y^\prime(\target)}{c_y^\prime(y^*(x, \target))}. 
\]

Then. 

- If $c_y(\cdot)$ is linear, we have that the ratio is one for all $x$. 

- If $c_y(\cdot)$ is convex, then we have that it is less than one. If 

- If $c_y(\cdot)$ is concave, then we have that it is higher than one.

As a result, if linear or convex the first order condition is lower than that in the race. Since the obj. function is concave (second order is decreasing), the target should be lower in a tournament than in a race to satisfy the first order condition.  (a lower target increases the focs.).

Conjecture. If $\tau>0$, the $\target$ in the race is higher. 


Structural econometric model
----------------------------

Readings: 

- [The winner's curse, reserve prices, and endogenous entry: Empirical insights from eBay auctions][ebay]

- [Entry and competition effects in first-price auctions: theory and evidence from procurement auctions][auctions]

- [Auctions with entry][entry]

[ebay]: http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.199.680&rep=rep1&type=pdf 
[entry]: http://www.vita.mcafee.cc/PDF/AuctionswithEntry.pdf
[auctions]:  https://www.econstor.eu/bitstream/10419/79263/1/516364804.pdf


General two-step strategy:

- First step. Identify the marginal type from the data and the distribution of types. 

- Second step. Using the estimated distribution of types. 


Basic idea. Equilibrium condition gives:
\begin{equation}
  y_i^* = y^*(a_i; F_{\mathcal{A}}). 
\end{equation}
with $y^*(\cdot)$ being an invertible function with $\phi$ denoting the inverse.

Hence the distribution of bids is
\begin{equation}
F_{Y}(y) = \Pr(y_i^* \leq y) 
        = \Pr(y^*(a_i) \leq y) 
        = \Pr(a_i \leq \phi(y)) 
        = F_\mathcal{A}( \phi(y)).
\end{equation}

Identification of the model. suggest
