
Results
=======

```{r results}
races <- races2

# Submissions
submissions <- tapply(scores$submission, scores$coder_id, max)
sub.total <- sum(submissions)
sub.med <- median(submissions)
sub.max <- max(submissions)
sub.min <- min(submissions)

# Participation
part.total <- sum(races$submit) # Number of participants
prob.part <- round(100*tapply(races$submit, races$treatment, mean))
(tab <- table(races$submit, races$treatment))
ft <- fisher.test(tab)
``` 

In the eight-day submission period, we collected a total of `r sub.total` submissions  made by  `r part.total` participants, with a median of `r sub.med` submissions per person (maximum of `r sub.max` submissions). Consistent with our prediction, the response rate was higher in the Tournament group (`r prob.part["tournament"]` percent), followed by the Tournament w/reseve (`r prob.part["reserve"]` percent), and the Race treatment (`r prob.part["race"]` percent). Though the association between treatment and response rates was not statistically significant (a `r ft$method` gives a p-value of `r ft$p.value`).

```{r}
(tab <- table(races$submit, races$room_size))
ft <- fisher.test(tab)
```

We find no difference between participation in large or small rooms (a `r ft$method` gives a p-value of `r ft$p.value`).

```{r}
(tab <- ftable(races$room_size, races$submit, races$treatment))
ft <- fisher.test(tab)

```
We also find no evidence of an overall association between treatments, room size and participation (a `r ft$method` gives a p-value of `r ft$p.value`).


```{r, fig.width=5, fig.height=7, fig.cap="Participation rates by rooms"}
x <- aggregate(submit ~ treatment + room + room_size, sum, data=races)
x$size <- ifelse(x$room_size=='Large', 15, 10)
x.l <- split(x, x$treatment)
par(mfrow=c(3, 1), mar=c(3, 3, 3, 1))
for (i in 1:3) {
  x <- x.l[[i]]
  p <- (x$submit + 1) / (x$size + 2)
  SE <- sqrt(p * (1-p) / x$size)
  x.title <- names(x.l)[i]
  plot(p, 1:length(p), xlim=c(0, 0.7), pch=16, main=x.title, col=x$size-5)
  segments(x0=p+SE, x1=p-SE, y0=1:length(p))
  abline(v=(sum(x$submit) + 1) / (sum(x$size)+2))
}
```
