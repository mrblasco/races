
Races and tournaments
============================

\input{definitions.txt}

The basic theoretical model
----------------------------

Consider a contest with $k$ available prizes of value $V_1 > V_2 > ... > V_k$. Each agent ($i=1, ..., n+1$) moves simultaneously to maximize the chances of winning a prize. To be elegible for a prize, each agent has to complete a task within a deadline $d>0$. Outcomes are then evaluated and ranked along two dimensions: the output quality $y_i$ and the time to completion $t_i$ both being nonnegative real numbers.

In a tournament, the agent having achieved the highest output quality within the deadline gets the first prize, the agent having achieved the second highest output quality gets the second prize, and so on. In a race, by contrast, the first agent to achieve an output quality of at least $\target$ within the deadline wins the first prize, the second to achieve the same target gets the second prize, and so on. 
<!-- Formally, let $y_{r:n+1}$ denote the $r$'th order statistic of the $y_i$'s (the $r$'th smallest quality). Then, in a tournament, the $j$'th prize goes to the agent whose output quality equals the $(n+2-j)$'th order statistic. Similarly, let $t_{r:n+1}$ denote the $r$'th order statistic of the $t_i$'s, then, in a race, the $j$'th prize goes to the agent whose time to achieve the target equals the $j$'th order statistic. -->

Since agents move simultaneously, they do not know the performance of others when deciding their efforts. On the other hand, it is assumed that they know the number of competitors as well as their cost functions to complete the task up to a factor $a_i$ being the agent's private ability in performing the task. Each agent knows his ability but does not know the ability of the others. However, it is common knowledge that abilities are drawn at random from a common distribution $F_A$ that is assumed everywhere differentiable on the support $A\subseteq [0, \infty)$. 

Each agent is risk neutral and maximizes the chances of winning a prize $\Pr(\cdot)$ minus the costs of effort $C(\cdot)$ as
\begin{equation}
  \begin{array}{ll}
    \mbox{maximize} & \sum_{j=1}^k \Pr(\text{ranked $j$'th}) V_j  - C(y_i, t_i, a_i).
  \end{array}
\end{equation}

Costs are assumed multiplicative
\begin{equation}
  C(y_i, t_i, a_i) = \cscore (y) \cdot \ctime (t)  \cdot a_i^{-1}
\end{equation}
with $\cscore(0)\geq 0$, $\cscore^\prime>0$, $\ctime(d)\geq 0$, and $\ctime^\prime<0$.


The contest designer chooses the rules of the competition, including prize structure and target quality,  to maximize the output quality while keeping low the time to completion. Net of the prize paid, the objective function is
\begin{equation}
  \begin{array}{ll}
    \mbox{maximize} & \int_{0}^{\infty} {y^*(a)} dF_A(a)   -  \tau \int_{0}^{\infty} {t^*(a)} dF_A(a)
  \end{array}
\end{equation}
where the parameter $\tau \in[0,1]$ denotes the utility weight attached by the sponsor to an increase in the average time to completion. 

### Equilibrium in a tournament

We provide here the symmetric equilibrium with two prizes and $n>3$ agents. In the appendix, we provide a general formula for $k>2$ prizes. Also, let normalize the prize pool $V_1+V_2=1$ and use the percentage $\alpha\geq1/2$ to denote the fraction of the prize pool going to the first placed competitor.

In a tournament, the unique symmetric equilibrium of the model gives, for every $i=1, ..., n$, the optimal time to completion $t^*(a_i)$ equal to the deadline $d$ and the optimal output quality $y^*(a_i)$ as
\begin{equation}
  \label{eq: optimal bid tournament}
  y^*(a_i) =  \cscore^{-1}\left[\cscore(0) + \frac{1}{\ctime(d)}\left(\alpha \int_{a_i}^{\infty} ... dz   + (1-\alpha) \int_{a_i}^{\infty} ...  dz\right)\right]
\end{equation}
if $\ability \geq \marginaltype$ [see @moldovanu2001optimal], and equal to zero otherwise. 

The main difference with @moldovanu2001optimal's one-dimensional equilibrium outcome can be understood by noting that, for every positive output quality $y>0$, any time to completion $t<d$ is strictly dominated by $t=d$, and, for $y^*=0$, the choice of the time to completion is irrelevant. So, the optimal choice of time to completion is either making use of all the time available or quitting the contest.

An important property of \eqref{eq: optimal bid tournament} is that $y^*(a_i)$ has its upper bound in  XXXX and lower bound in zero. Also, equilibrium output quality is monotonic increasing in the agent's ability [see @moldovanu2001optimal]. Thus, for every $i=1, ..., n+1$, the equilibrium expected reward $\ereward$ depends only on the rank of his ability relative to the others and can be written as
\begin{equation}
  \label{eq: expected payoffs tournament}
  \ereward \equiv \alpha F_A(a_i)^n  + (1-\alpha) n [1- F_A(a_i)] F_A(a_i)^{n-1}
\end{equation}

Hence, by setting \eqref{eq: expected payoffs tournament} equal to costs and solving for the ability, gives the marginal ability $\marginaltype$ as
\begin{equation}
  \marginaltype = \sup \{a\in A: \ereward  - C(0, d, a) = 0  \}.
\end{equation}
This gives the functional relationship between the $\marginaltype$ and the parameters
\begin{equation}
  \label{eq: marginal type}
  \marginaltype = h(n, \alpha, F_A, C_0)
\end{equation}
with $C_0 \equiv \cscore(0)\ctime(d)$.

### Equilibrium in a race

In a race, the unique symmetric equilibrium of the model gives, for every $i=1, ..., n$, the optimal quality $y^*(a_i)$ equal to the minimum requirement $\target$ and the optimal time to completion $t^*(a_i)$ as
\begin{equation}
  \label{eq: optimal time race}
  t^*(a_i) =  \ctime^{-1}\left[\ctime(d) + \frac{1}{\cscore(0)}\left(\alpha \int_{a_i}^{\infty} ... dz   + (1-\alpha) \int_{a_i}^{\infty} ...  dz\right)\right]
\end{equation}
if $\ability \geq \marginaltype$, and equal to zero otherwise. 

Again, the equilibrium time to completion is monotonic (decreasing) in the ability and,  therefore, as in the case of a tournament, we can derive the same functional relationship between the marginal type and the parameters
\begin{equation}
  \label{eq: marginal type race}
  \marginaltyperace = h(n, \alpha, F_A, C_{\target})
\end{equation}
with $C_{\target} \equiv \cscore(\target)\ctime(d)$ instead of $C_0$.

By comparing \eqref{eq: marginal type} with \eqref{eq: marginal type race} one important property emerges that is summarized in the next proposition.

\begin{proposition}
All else equal, participation is higher in a tournament compared to a race. 
\end{proposition}

A race introduces higher entry costs that drive low-ability competitors out of the contest. This effect can be beneficial to the contest sponsor in two ways. First, it may lower the total costs due to the time spent by competitors on the problem.  Second, the target may induce some agents to increase effort and, hence, output quality compared to what they would do in a tournament. This second effect is summarized in the next proposition. 

\begin{proposition}
All else equal, there always exists a subset of types $\tilde A\subset A$ for which the output quality is higher in a race compared to a tournament. 
\end{proposition}

This result implies that, regardless of the time to completion, a tournament never  "dominates" a race in terms of output quality ex-post, although it might do so ex-ante. 



### Example

To fix ideas, we consider the following example. Imagine cost functions are non-linear as $\ctime(t)=2e^{1-t}$ and $\cscore(y)=y^2$, as shown in Figure XXXX below. We further assume that abilities are drawn from a common log-Normal distribution.
  
```{r, echo=FALSE, fig.width=9.5, fig.cap="Example of non-linear cost functions with respect to output quality (left panel) and time to completion (right panel)."}

# Cost functions
cy <- function(x) x^2
ct <- function(x) 2*exp(1-x)
old.par <- par(mfrow=c(1, 2))
  curve(cy)
  curve(ct)
par(old.par)
```


Figure XXX shows the theoretical equilibrium bidding functions for a race and a tournament with varying competitors and prize structures. As can be seen, the gains from a race tend to disappear as the number of competitors grows and with a winner-takes-all prize structure. 

Note, these pictures do not show the differences in time to completion, which should be also taken into account to make a fuller comparison of gains for the contest design.

```{r, echo=FALSE, fig.width=9.5, fig.height=5, fig.cap=list("Equilibrium bidding functions of quality in a tournament (---) and in a race (- - -) with abilities drawn from a log Normal distribution. The number of competitors and the fraction of prize pool to the winner $\\alpha$ is at the top of each panel.")}

source("R/simulate_model.R")
z.lnorm <- f(n=c(3, 5, 10, 15, 50), V=c(1/2, 1),cy=cy, ct=ct
           , p=plnorm, d=dlnorm, r=rlnorm, inf.tol=20)
```



Structural econometric model
-----------------------------

We adopt a structural approach to the empirical comparison of races and tournaments.  This means that the econometric model for the observed outcomes is derived from the theoretical model of contests described above. Thus the basic parameters that determine the outcomes are the number of competitors, the costs, the rewards, and the distribution of private abilities. This modeling approach allows us to estimate the distribution of private values, which is useful for policy analysis. 

Consider the choice of making a submission or not.  As shown before, the optimal choice for an agent depends on its private ability. It is optimal to make a submission only if the agent's private ability $a$ is higher than that of the marginal type $\marginaltype$ (or $\marginaltyperace$ in a race). This marginal value depends on some known parameters, such as the number of competitors and the rewards, as well as on the distribution of abilities, that is unknown. 

We shall adopt a parametric formulation for $F_A$ and, for every $i$, we assume the private ability is drawn from a log-normal distribution with mean $\mu$ and standard deviation $\sigma$. Equivalently, we have that the ability is $a_i = e^{\mu + \sigma Z_i}$ with a random variable $Z_i\sim \text{Normal}(0, 1)$. 

The structural model describing the optimal choice of entry is then 
\begin{equation}
\Pr(a_i > \marginaltype)
  = \Pr(e^{\mu + \sigma Z_i} > \marginaltype) 
  = \Pr(Z_i > \frac{\marginaltype - \mu}{\sigma})
  = \Phi\left(\frac{\mu-\log(\marginaltype)}{\sigma}\right).
\end{equation}

The $\marginaltype$ can now be estimated by the method of moments or mle. Let consider the method of moments: 
\begin{equation}
  \hat p = n \Phi\left(\frac{\mu-\log(\marginaltype)}{\sigma}\right)
\end{equation}
we need to impose $\sigma=1$ and $\mu=0$ to identify the xxx. 


The log-likelihood function to maximize is
\begin{equation}
  ll = \sum_{i=1}^n  
    y_i \log(e^{-\marginaltype^\lambda}) + 
    (1 - y_i) \log(1-e^{-\marginaltype^\lambda}).
\end{equation}

We can use the Weibull together with the zero-profit condition XXXX to get an equation for the $\marginaltype$. 
\begin{equation}
  \alpha e^{n \marginaltype^k}  + (1-\alpha) n [1- e^{n \marginaltype^k}] e^{(n-1) \marginaltype^k}  - C_0  \marginaltype^{-1} = 0. 
\end{equation}
This simplifies to:
\begin{equation}
\marginaltype e^{(n-1)\marginaltype^\lambda} \left[ \alpha  e^{\marginaltype^\lambda} + (1-\alpha) n (1- e^{n \marginaltype^\lambda})\right] = C_0
\end{equation}
which has no closed solution, :(, but can be solved numerically. 

Also, since $C_0>0$, $\marginaltype$ has its lower bound in xxxx. 
